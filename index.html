<!DOCTYPE html>
<html>
<!--
![Code Style: Really Bad](https://alan.liangcn.ml/CodeStyle.svg)
ä¸€å¤©å®Œæˆï¼Œä»£ç è´¨é‡æå·®ï¼Œå‹¿å–·
æ¬¢è¿é‡æ„æˆ–prï¼Œä¸å¤ªæ¬¢è¿issueï¼Œé™¤éæœ‰é‡å¤§bug
è¯·å‹¿æ»¥ç”¨æœ¬æœåŠ¡ï¼è¯·å‹¿æ»¥ç”¨æœ¬æœåŠ¡ï¼è¯·å‹¿æ»¥ç”¨æœ¬æœåŠ¡ï¼ã€ä¼—è¯´ä¸‰ã€‘
æœ¬æœåŠ¡æœåŠ¡ç«¯ç¨‹åºæ— ä»»ä½•é˜²æ­¢æ¶æ„ä½¿ç”¨çš„é€»è¾‘ï¼Œå› æ­¤åˆ‡å‹¿ä½¿ç”¨æœ¬æœåŠ¡åšDDoSæˆ–è€…getshellä¹‹ç±»çš„å®éªŒï¼ï¼ï¼
æˆ‘ç›¸ä¿¡ä½ æ˜¯å¥½å¿ƒäººã€‚ğŸ˜‰
https://github.com/Alan-Liang/farewell
Author: Alan-Liang
å¹¿å‘Šï¼šæ¬¢è¿åŠ å…¥å®¢é¡µå·¥ä½œå®¤
é‚®ä»¶è‡³aè‰¾ç‰¹1e100ç‚¹tkæ¥è”ç³»æˆ‘ã€‚
-->
<head>
<title>Farewell</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<link href="./mdc.css" rel="stylesheet" type="text/css" />
<style>
/* commons */
.width-100{
	width:100%;
}
.width-90{
	width:90%;
}
.width-90.a.b.c.d{
	margin-left:auto;
	margin-right:auto;
}
.align-center{
	text-align:center;
}
.align-left{
	text-align:left;
}
.no-padding{
	padding:0;
	min-height:0;
}
.align-center{
	text-align:center;
}
.align-right{
	text-align:right;
}
[hidden], .hidden{
	display:none;
}
.atme{
	font-weight:bold;
	color:#e00;
}

body{
	margin:0;
}
html,body{
	width:100%;
	height:100%;
}
#header-pad{
	height:64px;
}
#student,#teacher,#parent,#final{
	display:none;
}
#preview{
	width:100%;
}
#paint-canvas{
	/*display:none;*/
	width:100%;
	height:100%;
}
#sign-canvas{
	border:1px solid #000;
	margin-left:10px;
	margin-right:10px;
	width:700px;
	height:280px;
}
#sign{
	display:none;
	width:720px;
}
#styles{
	display:none;
}
#bg-list li,#bg-list div,#bg-list img{
	width:128px;
	height:180px;
	margin:10px;
}
#result{
	display:none;
}
#final-image{
	width:100%;
}
</style>
<script language="x/template" id="template-radio">

<div class="mdc-form-field" data-mdc-auto-init="MDCFormField">
  <div class="mdc-radio" data-mdc-auto-init="MDCRadio">
    <input class="mdc-radio__native-control" type="radio" id="{{id}}" name="{{name}}">
    <div class="mdc-radio__background">
      <div class="mdc-radio__outer-circle"></div>
      <div class="mdc-radio__inner-circle"></div>
    </div>
  </div>
  <label for="{{id}}">{{text}}</label>
</div>
</script>
<script language="x/template" id="template-text-field">
<div class="mdc-text-field width-90" data-mdc-auto-init="MDCTextField">
  <input type="text" id="{{id}}" class="mdc-text-field__input">
  <label class="mdc-floating-label" for="{{id}}">{{text}}</label>
  <div class="mdc-line-ripple"></div>
</div>
<br />
</script>
<script language="x/template" id="template-select-frame">
<div class="mdc-select" data-mdc-auto-init="MDCSelect">
  <select class="mdc-select__native-control" id="{{id}}">
	{{options}}
  </select>
  <label class="mdc-floating-label">{{text}}</label>
  <div class="mdc-line-ripple"></div>
</div>
</script>
<script language="x/template" id="template-imglist-li">
  <li class="mdc-image-list__item">
    <div class="bg-li mdc-image-list__image-aspect-container mdc-ripple-surface" data-mdc-auto-init="MDCRipple" id="{{id}}" onclick="$(&quot;bg&quot;).value=&quot;{{i}}&quot;">
      <img class="mdc-image-list__image bg-img" src="{{src}}"/>
    </div>
  </li>
</script>
<script language="x/template" id="template-result">
<h6 class="mdc-typography--subtitle1">æäº¤æˆåŠŸï¼</h6>
<h6 class="mdc-typography--subtitle1">å¦‚æœæ‚¨ä»¥åå¯èƒ½å†æ›´æ”¹ä»»ä½•å†…å®¹ï¼Œè¯·è®°ä½è¿™ä¸ªè®¢å•å·ï¼š{{id}}</h6>
</script>
<script language="x/template" id="template-checkbox">
<div class="mdc-form-field">
  <div class="mdc-checkbox" data-mdc-auto-init="MDCCheckbox">
    <input type="checkbox"
           class="mdc-checkbox__native-control"
           id="{{id}}"/>
    <div class="mdc-checkbox__background">
      <svg class="mdc-checkbox__checkmark"
           viewBox="0 0 24 24">
        <path class="mdc-checkbox__checkmark-path"
              fill="none"
              d="M1.73,12.91 8.1,19.28 22.79,4.59"/>
      </svg>
      <div class="mdc-checkbox__mixedmark"></div>
    </div>
  </div>
  <label for="{{id}}">{{text}}</label>
</div>
</script>
<script language="x/template" id="template-select">
    <option value="{{value}}">{{text}}</option>
</script>
<script language="x/template" id="template-text">

å§“åï¼š{{name}}
ç­çº§ï¼š{{itsClass}}
å¤–å·æœ‰ï¼š{{nicks}}
Ta{{study}}å­¦é­”ã€‚
æˆ‘å«Taã€{{nick}}ã€‘
Taå«æˆ‘ã€{{mynick}}ã€‘
å¾®ä¿¡ï¼š{{wechat}}
æ‰‹æœºï¼š{{phone}}
Taèƒ½å›å¿†èµ·æˆ‘ï¼š
{{plot}}

Taæ˜¯ä¸€ä½æˆ‘å°Šæ•¬çš„è€å¸ˆã€‚
Taä»{{begin}}åˆ°{{end}}æœŸé—´ï¼Œ
æ•™æˆ‘çš„{{subject}}ã€‚
åœ¨Taçš„å°è±¡ä¸­ï¼Œæˆ‘æ˜¯è¿™æ ·çš„ï¼š
{{timpact}}

Taæ˜¯{{child}}çš„{{relation}}ã€‚
åœ¨Taçš„å°è±¡ä¸­ï¼Œæˆ‘æ˜¯è¿™æ ·çš„ï¼š
{{impact}}

</script>
<!--script type="text/javascript" src="https://res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/vconsole/3.0.0/vconsole.min.js"></script-->
</head>
<body>
<script src="./utils.js"></script>
<div id="info">
<header class="mdc-top-app-bar mdc-elevation--z5 {{hideAppBar}}" id="appbar" data-mdc-auto-init="MDCTopAppBar">
  <div class="mdc-top-app-bar__row">
    <section class="mdc-top-app-bar__section">
      <span class="mdc-top-app-bar__title align-center width-100">Farewell</span>
    </section>
  </div>
</header>
<div id="header-pad" class="{{hideAppBar}}"></div>

<div id="basics">
<div class="align-center" data-init="radio identity rad-student/åŒå­¦ rad-teacher/è€å¸ˆ rad-parent/å®¶é•¿">
<h6 class="mdc-typography--subtitle1">1. ä½ çš„èº«ä»½æ˜¯ï¼Ÿ</h6>
</div>

<div class="align-center">
<h6 class="mdc-typography--subtitle1">2. ä½ çš„åå­—æ˜¯ï¼Ÿ</h6>
<div data-init="text-field name/å§“å"></div>
<button id="upload-avatar" class="mdc-button mdc-button--raised" data-mdc-auto-init="MDCRipple">ä¸Šä¼ ä½ çš„ç…§ç‰‡</button>
<img id="preview" />
<br />
<button id="cont1" class="mdc-button mdc-button--raised" data-mdc-auto-init="MDCRipple">ç»§ç»­</button>
</div>
</div>

<div id="student">
<div class="align-center" data-init="select class ç­çº§ 4/4 1/1 2/2 3/3 5/5 6/6 7/7 8/8 9/9 10/10 11/11 12/12 13/13 14/14 other/å…¶ä»–å¹´çº§æˆ–ç­çº§">
<h6 class="mdc-typography--subtitle1">ä½ çš„ç­çº§æ˜¯ï¼Ÿ(å¦‚æœä¸æ˜¯åˆä¸‰è¯·é€‰å…¶ä»–)</h6>
</div>

<div class="align-center" data-init=
"text-field nick/ä½ çš„å°è±¡ä¸­æˆ‘å«ä½ ä»€ä¹ˆï¼Ÿ mynick/ä½ ä¸€èˆ¬å«æˆ‘ä»€ä¹ˆï¼Ÿ plot/æˆ‘åšè¿‡ä»€ä¹ˆä»¤ä½ å°è±¡æ·±åˆ»çš„äº‹ï¼Ÿ nicks/ä½ è¿˜æœ‰ä»€ä¹ˆåˆ«åï¼Ÿ wechat/ä½ çš„å¾®ä¿¡ phone/ä½ çš„ç”µè¯å·ï¼Ÿ">
<h6 class="mdc-typography--subtitle1">ä¸€äº›ä¸ªäººé—®é¢˜</h6>
</div>
<div style="margin-left:5%;" data-init="select study ä½ æ˜¯å­¦é­”å—ï¼Ÿ yes/æ˜¯çš„ abs/è‚¯å®šæ˜¯ whynot/æ€ä¹ˆå¯èƒ½ä¸æ˜¯å‘¢ï¼Ÿ"></div>
</div><!-- end student -->

<div id="teacher">
<div class="align-center">
<h6 class="mdc-typography--subtitle1">å…³äºæ‚¨</h6>
<div data-init="text-field subject/æ‚¨æ•™çš„ç§‘ç›®æ˜¯ï¼Ÿ"></div>
<div data-init="select begin æ‚¨ä»â€¦ åˆä¸€/åˆä¸­ä¸€å¹´çº§ åˆäºŒ/åˆä¸­äºŒå¹´çº§ åˆä¸‰/åˆä¸­ä¸‰å¹´çº§"></div>
<div data-init="select end æ•™åˆ°â€¦ åˆäºŒ/åˆä¸­äºŒå¹´çº§ åˆä¸‰/åˆä¸­ä¸‰å¹´çº§"></div>
</div>

<div class="align-center" data-init="text-field timpact/æ‚¨å¯¹æˆ‘çš„å°è±¡æ˜¯â€¦">
<h6 class="mdc-typography--subtitle1">å…³äºæˆ‘</h6>
</div>
</div>

<div id="parent">
<div class="align-center" data-init="text-field child/æ‚¨çš„å­©å­æ˜¯ï¼Ÿ relation/æ‚¨æ˜¯å­©å­çš„â€¦">
<h6 class="mdc-typography--subtitle1">å…³äºæ‚¨çš„å­©å­</h6>
</div>
<div class="align-center" data-init="text-field impact/æ‚¨å¹³æ—¶å¯¹æˆ‘çš„å°è±¡æ˜¯ä»€ä¹ˆï¼Ÿ">
<h6 class="mdc-typography--subtitle1">å…³äºæˆ‘</h6>
</div>
</div>

<div id="final" class="align-center width-100">
<h6 class="mdc-typography--subtitle1">é‡è¦ï¼å¦‚æœæ‚¨ä»¥å‰æäº¤è¿‡å›¾ç‰‡ï¼Œä½†æ˜¯æƒ³ä¿®æ”¹ï¼Œè¯·åŠ¡å¿…åœ¨ç•™è¨€åæ‰“16ä¸ªå›è½¦ç„¶åè¾“å…¥ä¹‹å‰çš„è®¢å•å·ã€‚è°¢è°¢ï¼</h6>
<div class="align-left a b c d mdc-text-field mdc-text-field--textarea width-90" data-mdc-auto-init="MDCTextField">
  <textarea id="says" class="mdc-text-field__input"></textarea>
  <label for="says" class="mdc-floating-label">æ‚¨æœ‰ä»€ä¹ˆæƒ³å¯¹æˆ‘è¯´çš„å—ï¼Ÿ</label>
</div>
<button id="cont2" class="mdc-button mdc-button--raised" data-mdc-auto-init="MDCRipple">ç»§ç»­</button>
</div>

<div id="sign" class="align-center">
<h6 class="mdc-typography--subtitle1">ç­¾å</h6>
<h6 class="mdc-typography--subtitle2">æ‚¨å¯ä»¥å°†å±å¹•æ¨ªå‘æ—‹è½¬</h6>
<canvas id="sign-canvas" width="700px" height="280px"></canvas>
<button id="clear" class="mdc-button" data-mdc-auto-init="MDCRipple">æ¸…é™¤</button>
<button id="undo" class="mdc-button" data-mdc-auto-init="MDCRipple">æ’¤é”€</button>
<br />
<button id="cont4" class="mdc-button mdc-button--raised" data-mdc-auto-init="MDCRipple">æäº¤</button>
<button id="skip4" class="mdc-button" data-mdc-auto-init="MDCRipple">è·³è¿‡</button>
</div>

<div id="styles" class="align-center">
<h6 class="mdc-typography--subtitle1">é€‰æ‹©è¾¹æ¡†æ ·å¼</h6>
<ul class="mdc-image-list" id="bg-list"></ul>
<div data-init="select bg è¾¹æ¡† sel/è¯·ç‚¹å‡»å›¾ç‰‡ 1/1(53.8kB) 2/2(610.9kB) 3/3(914.1kB) 4/4(56.2kB) 5/5(74.9kB) 6/6(202.1kB) 7/7(1.1MB)"></div>
<h6 class="mdc-typography--subtitle1">é€‰é¡¹</h6>
<div data-init="checkbox jpeg/æœ‰æŸå‹ç¼©(é™ä½å“è´¨ï¼ŒèŠ‚çœæµé‡)"></div>
<h6 class="mdc-typography--subtitle1">é€‰æ‹©èƒŒæ™¯é¢œè‰²</h6>
<input id="color-bg" class="width-90" type="color" value="#ffffff" />
<h6 class="mdc-typography--subtitle1">é€‰æ‹©å§“åé¢œè‰²</h6>
<input id="color-name" class="width-90" type="color" value="#000000" />
<h6 class="mdc-typography--subtitle1">é€‰æ‹©æ–‡å­—é¢œè‰²</h6>
<input id="color-text" class="width-90" type="color" value="#000000" />
<h6 class="mdc-typography--subtitle1">é€‰æ‹©ç•™è¨€é¢œè‰²</h6>
<input id="color-says" class="width-90" type="color" value="#000000" />
<h6 class="mdc-typography--subtitle1">é€‰æ‹©ç­¾åé¢œè‰²</h6>
<input id="color-sign" class="width-90" type="color" value="#000000" />
<button id="cont3" class="mdc-button mdc-button--raised" data-mdc-auto-init="MDCRipple">ä¸‹ä¸€æ­¥</button>
</div>

<div id="result" class="align-center">
<div id="upload-res"></div>
<img id="final-image" />
<div id="res-action">
<div class="g-recaptcha" data-callback="rccb" data-sitekey="6LeDMmAUAAAAAL-mHPh4jPQXP6Uc3zidodkpBZVq"></div>
<button id="submit" disabled="disabled" class="mdc-button mdc-button--raised" data-mdc-auto-init="MDCRipple">æäº¤å›¾ç‰‡</button>
</div>
</div>
<br />
<!-- Uploader -->
<input type="file" id="image" accept="image/*" style="display:none">
</div>
<!-- Info end -->

<div id="paint">
<canvas id="paint-canvas">ä½ åœ¨ç”¨ä»€ä¹ˆæµè§ˆå™¨ï¼Ÿè¯·æ¢ä¸€ä¸ªæ–°çš„ï¼æ¨èï¼š<a href="https://www.google.cn/chrome">Google Chrome</a></canvas>
<div id="controls"></div>
</div>

<script src="./init.js"></script>
<script src="./signpad.js"></script>
<script>
var ua=navigator.userAgent;
if((/micromess/i).test(ua)){ //å¾®å‹æ··ä¹±
	if(!(/wifi/i).test(ua)){
		alert("æœ¬é¡µé¢å¯èƒ½æ¶ˆè€—1-2MBæµé‡ï¼Œæ¨èåœ¨Wi-Fiç½‘ç»œä¸­è®¿é—®ã€‚");
	}
}
//@author Rok StrniÅ¡a@StackOverflow
//see https://stackoverflow.com/questions/5026961/html5-canvas-ctx-filltext-wont-do-line-breaks/21574562
CanvasRenderingContext2D.prototype.wrapText = function (text, x, y, maxWidth, lineHeight) {
    var lines = text.split("\n");
    for (var i = 0; i < lines.length; i++) {
        var words = lines[i].split('');
        var line = '';
        for (var n = 0; n < words.length; n++) {
            var testLine = line + words[n];
            var metrics = this.measureText(testLine);
            var testWidth = metrics.width;
            if (testWidth > maxWidth && n > 0) {
                this.fillText(line, x, y, maxWidth);
                line = words[n];
                y += lineHeight;
            }
            else {
                line = testLine;
            }
        }
        this.fillText(line, x, y, maxWidth);
        y += lineHeight;
    }
}
//@author end
var html="";
var imglist=$("bg-list");
var templImglistLi=$("template-imglist-li").innerHTML;
for(var i=1;i<8;i++){
	html+=template(templImglistLi,{src:"./background/thumb/"+i+".jpg",id:"bg-li-"+i,i:i});
}
imglist.innerHTML=html;

var templText=$("template-text").innerHTML.split("\n\n");
$("upload-avatar").onclick=function(){
	$("image").click();
};
$("image").onchange=function(){
	var files=$("image").files;
	var _url=URL.createObjectURL(files[0]);
	$("preview").src=_url;
};
function isChecked(id){
	return $(id).parentElement.MDCRadio.checked;
}
var identity;
$("cont1").onclick=function(){
	if(!$("name").value){
		$("name").focus();
		return;
	}
	if((!$("image").files||!$("image").files.length)&&(!confirm("ä½ ç¡®å®šä¸ä¸Šä¼ ç…§ç‰‡å—ï¼Ÿ"))){
		$("image").click();
		return;
	}
	if(isChecked("rad-student")){
		$("student").show();
		identity=1;
	}else if(isChecked("rad-teacher")){
		$("teacher").show();
		identity=2;
	}else if(isChecked("rad-parent")){
		$("parent").show();
		identity=3;
	}else{
		return;
	}
	$("basics").hide();
	$("final").show();
	setTimeout(function(){
		window.scrollTo(0,0);
	},10);
}
$("cont2").onclick=function(){
	var fields;
	switch(identity){
		case 1: //student
		fields="name|nick|mynick|plot|nicks|wechat|phone|says".split("|");
		break;
		
		case 2: //teacher
		fields="name|subject|begin|end|timpact|says".split("|");
		break;
		
		case 3: //parent
		fields="name|child|relation|impact|says".split("|");
		break;
		
		default: //error
		alert("å‘ç”Ÿäº†ä¸€ä¸ªè¯¡å¼‚çš„é”™è¯¯ã€‚è¯·è”ç³»æˆ‘ã€‚");
		return;
		break;
	}
	var values={};
	for(var i=0;i<fields.length;i++){
		var el=$(fields[i]);
		if(!el.value){
			el.focus();
			return;
		}
		values[fields[i]]=el.value;
	}
	if(identity==1){ //student
		var itsClass=$("class").value; //class is reserved
		if(itsClass=="other"){
			var res;
			while(!res){
				res=prompt("è¯·å¡«å†™ä½ çš„ç­çº§ï¼š","");
			}
			itsClass=res;
		}
		values.itsClass=itsClass;
		values.study={
			yes:"æ˜¯",
			abs:"è‚¯å®šæ˜¯",
			whynot:"æ€ä¹ˆå¯èƒ½ä¸æ˜¯"
		}[$("study").value];
	}
	if($("image").files.length)
		values.avatar=getDataURL($("preview"));
	window.values=values;
	$("teacher").hide();
	$("student").hide();
	$("parent").hide();
	$("final").hide();
	$("styles").show();
}
$("cont4").onclick=function(){
	if(window.signPad.isEmpty())
		return;
	var v=window.values;
	var inputs="bg|color-bg|color-name|color-text|color-says|color-sign".split("|");
	for(var i=0;i<inputs.length;i++){
		v[inputs[i]]=$(inputs[i]).value;
	}
	v.sign=$("sign-canvas").toDataURL();
	paint();
}
$("cont3").onclick=function(){
	if($("bg").value=="sel"){ //empty
		alert("è¯·é€‰æ‹©è¾¹æ¡†ï¼");
		return;
	}
	var canvas=$("sign-canvas");
	var signPad=window.signPad=new SignaturePad(canvas,{penColor:$("color-sign").value});	
	$("clear").onclick=function(){
		signPad.clear();
	};
	$("undo").onclick=function(){
		var data = signPad.toData();
		if(data){
			data.pop();
			signPad.fromData(data);
		}
	};
	$("styles").hide();
	$("sign").show();
	setTimeout(function(){
		window.scrollTo(0,1);
	},10);
};

var paint=function(){
	//paint!
	setTimeout(function(){
		window.scrollTo(0,1);
	},10);
	var values=window.values;
	var size=[2492,3508];
	var canvas=$("paint-canvas");
	canvas.setAttribute("width",size[0]+"px");
	canvas.setAttribute("height",size[1]+"px");
	$("info").hide();
	$("sign").hide();
	$("paint").show();
	var ctx=canvas.getContext("2d");
	var img=new Image();
	var avatar=new Image();
	var sig=new Image();
	ctx.font="256px Roboto";
	ctx.wrapText("æ­£åœ¨ç»˜å›¾ä¸­ï¼Œè¯·ç¨å€™â€¦",0,2000);
	img.onload=function(){
		img.ok=true;
		ctx.fillStyle=$("color-bg").value;
		ctx.fillRect(0,0,size[0],size[1]);
		ctx.drawImage(img,0,0,size[0],size[1])
		ctx.fillStyle=$("color-name").value;;
		ctx.textAlign="center";
		ctx.font="256px Roboto";
		ctx.fillText(values.name,1246,396);
		ctx.fillStyle=$("color-text").value;
		ctx.textAlign="start";
		ctx.font="64px Roboto";
		ctx.wrapText(template(templText[identity],values),128,576,1423,96);
		ctx.fillStyle=$("color-says").value;
		ctx.wrapText(values.says,256,2048,1964,96);
		if(avatar.ok)
			drawAvatar();
		if(sig.ok)
			drawSig();
		if(avatar.ok&&sig.ok)
			complete();
	};
	var drawAvatar=function(){
		var ratioX=avatar.width/1024;
		var ratioY=avatar.height/1355;
		var ratio=Math.max(ratioX,ratioY);
		ctx.drawImage(avatar,1300,480,avatar.width/ratio,avatar.height/ratio);
	};
	var drawSig=function(){
		var ratioX=sig.width/560;
		var ratioY=sig.height/224;
		var ratio=Math.max(ratioX,ratioY);
		ctx.drawImage(sig,1730,3130,sig.width/ratio,sig.height/ratio);
	};
	avatar.onload=function(){
		avatar.ok=true;
		if(!img.ok)
			return;
		drawAvatar();
		if(sig.ok)
			complete();
	};
	sig.onload=function(){
		sig.ok=true;
		if(!img.ok)
			return;
		drawSig();
		if(avatar.ok)
			complete();
	};
	var complete=function(){
		//draw completed, move it into image
		window.onresize=null;
		var _url;
		if($("jpeg").checked)
			_url=canvas.toDataURL("image/jpeg");
		else _url=canvas.toDataURL();
		values.image=_url;
		$("final-image").src=_url;
		$("paint").hide();
		$("result").show();
		$("info").show();
	};
	img.src="./background/"+$("bg").value+".png";
	if($("image").files.length)
		avatar.src=URL.createObjectURL($("image").files[0]);
	else avatar.src="./na.png";
	sig.src=$("sign-canvas").toDataURL();
};
$("skip4").onclick=paint;
window.currentDrawingEl="paint-canvas";
window.onresize=function(){
	var size=[2492,3508];
	var ratioX=size[0]/window.innerWidth;
	var ratioY=size[1]/window.innerHeight;
	var ratio=Math.max(ratioX,ratioY);
	var s=$(window.currentDrawingEl).style;
	s.width=size[0]/ratio;
	s.height=size[1]/ratio;
};
window.onresize();

var rccb=function(token){
	window.token=token;
	$("submit").removeAttribute("disabled");
};
window.__recaptcha_api="https://www.recaptcha.net/recaptcha/";
$("submit").onclick=function(){
	$("submit").setAttribute("disabled","true");
	httppost("upload?token="+encodeURIComponent(window.token),window.values,function(req,resp){
		if(req.status==200){//OK
			$("res-action").hide();
			$("upload-res").innerHTML=template($("template-result").innerHTML,{id:resp});
		}else{//error
			alert("æœåŠ¡å™¨å‘ç”Ÿäº†é”™è¯¯ï¼Œè¯·ç¨å€™å†è¯•ï¼"+resp);
			$("submit").removeAttribute("disabled");
		}
	});
};
</script>
<script src="./mdc.js"></script>
<script>mdc.autoInit();//var vc=new VConsole();
</script>
<script src="https://www.recaptcha.net/recaptcha/api.js" async defer></script>
</body>
</html>